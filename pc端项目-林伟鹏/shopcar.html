<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/reset.css">
    <!-- <link rel="stylesheet" href="./css/public.css"> -->
    <link rel="stylesheet" href="./css/shopcar.css">
</head>

<body>
    <div class="outer">
        <!-- 头部 -->
        <div class="headerWrap">
            <!-- 顶层注册订单栏 -->
            <div class="headerBar">
                <div class="container">
                    <!-- 登陆 -->
                    <div class="login">
                        <p>尚品汇欢迎您！</p>
                        <p>
                            <span>请</span>
                            <a href="#">登陆</a>
                            <a href="#" class="register">免费注册</a>
                        </p>
                    </div>

                    <!-- 右侧订单栏 -->
                    <div class="order">
                        <a href="###">我的订单</a>
                        <a href="###">我的购物车</a>
                        <a href="###">我的尚品汇</a>
                        <a href="###">尚品汇会员</a>
                        <a href="###">企业采购</a>
                        <a href="###">关注尚品汇</a>
                        <a href="###">合作招商</a>
                        <a href="###">商家后台</a>
                    </div>
                </div>
            </div>

            <div class="logo">
                <div class="logoArea">
                    <a href="#" title="尚品汇" target="_blank">
                        <img src="./images/Logo.png" alt="">
                    </a>
                </div>

                <div class="searchBar">
                    <form action="#" class="searchForm">
                        <input type="text">
                        <button>搜索</button>
                    </form>
                </div>

            </div>

        </div>

        <!-- 菜单栏分栏 -->
        <div class="typeNav">
            <div class="container">
                <h1 class="all">全部商品分类</h1>
                <nav class="nav">
                    <a href="###">服装城</a>
                    <a href="###">美妆馆</a>
                    <a href="###">尚品汇超市</a>
                    <a href="###">全球购</a>
                    <a href="###">闪购</a>
                    <a href="###">团购</a>
                    <a href="###">有趣</a>
                    <a href="###">秒杀</a>
                </nav>
            </div>
        </div>

        <div class="middleShopCar">
            <h4>全部商品</h4>
            <div class="mainWrap">
                <div class="Bar">
                    <div class="c1">全部</div>
                    <div class="c2">商品</div>
                    <div class="c3">单价 (元)</div>
                    <div class="c4">数量</div>
                    <div class="c5">小计 (元)</div>
                    <div class="c6">操作</div>
                </div>
            </div>
            <div class="shopCarItem">
                <!-- <ul>
                    <li class="l1">
                        <input type="checkbox">
                    </li>

                    <li class="l2">
                        <img src="./images/goods1.png" alt="">
                        <div>米家（MIJIA） 小米小白智能摄像机增强版 1080p高清360度全景拍摄AI增强</div>
                    </li>

                    <li class="l3">
                        <div>语音升级款</div>
                    </li>

                    <li class="l4">
                        <span>399.00</span>
                    </li>

                    <li class="l5">
                        <a href="#" class="mins">-</a>
                        <input type="text" value="1" class="itext">
                        <a href="#" class="plus">+</a>
                    </li>

                    <li class="l6">
                        <span>399.00</span>
                    </li>

                    <li class="l7">
                        <a href="#" class="sure">删除</a>
                        <br>
                        <a href="#">移至收藏栏</a>
                    </li>

                </ul>
                <ul>
                    <li class="l1">
                        <input type="checkbox">
                    </li>

                    <li class="l2">
                        <img src="./images/goods2.png" alt="">
                        <div>米家（MIJIA） 小米小白智能摄像机增强版 1080p高清360度全景拍摄AI增强</div>
                    </li>

                    <li class="l3">
                        <div>语音升级款</div>
                    </li>

                    <li class="l4">
                        <span>399.00</span>
                    </li>

                    <li class="l5">
                        <a href="#" class="mins">-</a>
                        <input type="text" value="1" class="itext">
                        <a href="#" class="plus">+</a>
                    </li>

                    <li class="l6">
                        <span>399.00</span>
                    </li>

                    <li class="l7">
                        <a href="#" class="sure">删除</a>
                        <br>
                        <a href="#">移至收藏栏</a>
                    </li>

                </ul>
                <ul>
                    <li class="l1">
                        <input type="checkbox">
                    </li>

                    <li class="l2">
                        <img src="./images/goods3.png" alt="">
                        <div>米家（MIJIA） 小米小白智能摄像机增强版 1080p高清360度全景拍摄AI增强</div>
                    </li>

                    <li class="l3">
                        <div>语音升级款</div>
                    </li>

                    <li class="l4">
                        <span>399.00</span>
                    </li>

                    <li class="l5">
                        <a href="#" class="mins">-</a>
                        <input type="text" value="1" class="itext">
                        <a href="#" class="plus">+</a>
                    </li>

                    <li class="l6">
                        <span>399.00</span>
                    </li>

                    <li class="l7">
                        <a href="#" class="sure">删除</a>
                        <br>
                        <a href="#">移至收藏栏</a>
                    </li>

                </ul> -->
            </div>
            <div class="func">
                <div class="selectBar">
                    <input type="checkbox">
                    <span>全选</span>
                </div>
                <div class="dele">
                    <a href="#" class="choDel">删除选中的商品</a>
                    <a href="#">移到我的关注</a>
                    <a href="#">清除下柜商品</a>
                </div>
                <div class="checkBill">
                    <div class="choice">
                        已经选择
                        <span>0</span>
                        件商品
                    </div>

                    <div class="bill">
                        <em>总价 (不含运费) :</em>
                        <i class="money">￥0</i>
                    </div>

                    <div class="payment">
                        <a href="#">结算</a>
                    </div>
                </div>
            </div>

        </div>


        <div class="footer">
            <div class="footerWrap">
                <div class="service no1">
                    <h5>购物指南</h5>
                    <ul>
                        <li>购物流程</li>
                        <li>会员介绍</li>
                        <li>生活旅行/团购</li>
                        <li>常见问题</li>
                        <li>购物指南</li>
                    </ul>
                </div>
                <div class="service">
                    <h5>配送方式</h5>
                    <ul>
                        <li>上门自提</li>
                        <li>211限时达</li>
                        <li>配送服务查询</li>
                        <li>配送费收取标准</li>
                        <li>海外配送</li>
                    </ul>
                </div>
                <div class="service">
                    <h5>支付方式</h5>
                    <ul>
                        <li>货到付款</li>
                        <li>在线支付</li>
                        <li>分期付款</li>
                        <li>邮局汇款</li>
                        <li>公司转账</li>
                    </ul>
                </div>
                <div class="service">
                    <h5>售后服务</h5>
                    <ul>
                        <li>售后政策</li>
                        <li>价格保护</li>
                        <li>退款说明</li>
                        <li>返修/退换货</li>
                        <li>取消订单</li>
                    </ul>
                </div>
                <div class="service">
                    <h5>特色服务</h5>
                    <ul>
                        <li>夺命岛</li>
                        <li>DIY装机</li>
                        <li>延保服务</li>
                        <li>尚品汇E卡</li>
                        <li>尚品汇通信</li>
                    </ul>
                </div>

                <div class="help">
                    <h5>帮助中心</h5>
                    <img src="./images/wx_cz.jpg" alt="">
                </div>



            </div>

            <div class="aboutUs">
                <ul class="helpLink">
                    <li>
                        关于我们<span class="lin"></span>
                    </li>
                    <li>
                        联系我们<span class="lin"></span>
                    </li>
                    <li>
                        关于我们<span class="lin"></span>
                    </li>
                    <li>
                        商家入驻<span class="lin"></span>
                    </li>
                    <li>
                        营销中心<span class="lin"></span>
                    </li>
                    <li>
                        友情链接<span class="lin"></span>
                    </li>
                    <li>
                        关于我们<span class="lin"></span>
                    </li>
                    <li>
                        营销中心<span class="lin"></span>
                    </li>
                    <li>
                        友情链接<span class="lin"></span>
                    </li>
                    <li>
                        关于我们<span class="lin nn2"></span>
                    </li>
                </ul>
                <p>地址：北京市昌平区宏福科技园综合楼6层</p>
                <p class="address">京ICP备19006430号</p>
            </div>
        </div>
    </div>

    <script src="./js/cart.js"></script>
    <script>
        window.addEventListener("DOMContentLoaded", function () {
            leftCheck();
            function leftCheck() {
                var carcheck = document.querySelector(".middleShopCar .func .selectBar input");





            }

            ppp();
            function ppp() {
                var newStr = localStorage.getItem("newMassage")
                if (newStr) {
                    var trueStr = JSON.parse(newStr)
                    // console.log(trueStr)
                    cartData.goods.unshift(trueStr);
                }

            }

            // 购物车内容动态生成
            freeData();
            function freeData() {
                cartData.goods.forEach(function (item) {
                    var dataContent = `
                    <ul>
                    <li class="l1">
                        <input type="checkbox">
                    </li>

                    <li class="l2">
                        <img src="${item.goodImg}" alt="">
                        <div>${item.goodTitle}</div>
                    </li>

                    <li class="l3">
                        <div>${item.goodTxt}</div>
                    </li>

                    <li class="l4">
                        <span>${item.goodPrice}</span>
                    </li>

                    <li class="l5">
                        <a href="#" class="mins">-</a>
                        <input type="text" value="${item.goodNum}" class="itext">
                        <a href="#" class="plus">+</a>
                    </li>

                    <li class="l6">
                        <span>399.00</span>
                    </li>

                    <li class="l7">
                        <a href="#" class="sure">删除</a>
                        <br>
                        <a href="#">移至收藏栏</a>
                    </li>

                    </ul>
                `;

                    var ccBody = document.querySelector('.middleShopCar .shopCarItem ');
                    ccBody.innerHTML += dataContent;
                })
            }
            //01 购物车功能
            car();
            function car() {

                //01 全选功能
                var carcheck = document.querySelector(".middleShopCar .func .selectBar input");
                carcheck.onchange = function () {
                    var flag = this.checked;
                    var chooseBox = document.querySelectorAll(".middleShopCar .shopCarItem ul .l1 input")
                    if (flag) {
                        chooseBox.forEach(function (item) {
                            item.checked = true;
                        })
                    } else {
                        chooseBox.forEach(function (item) {
                            item.checked = false;
                        })
                    }
                    paymentB();
                    paymentC();
                }

                //02 单选的功能
                var chooseBox = document.querySelectorAll(".middleShopCar .shopCarItem ul .l1 input");
                chooseBox.forEach(function (item) {
                    item.onchange = function () {
                        var CA = document.querySelectorAll(".middleShopCar .shopCarItem ul .l1 input").length;
                        var CB = document.querySelectorAll(".middleShopCar .shopCarItem ul .l1 input:checked").length;
                        // console.log(CB)
                        // console.log(CA)

                        if (CA == CB) {
                            carcheck.checked = true;
                        } else {
                            carcheck.checked = false;
                        }
                        paymentB();
                        paymentC();
                    }

                })

                //03 加法功能
                var fpx = document.querySelectorAll(".middleShopCar .shopCarItem ul .l5 .plus");
                fpx.forEach(function (item) {
                    item.onclick = function () {
                        var num = parseInt(this.parentNode.querySelector(".itext").value);

                        var price = parseFloat(this.parentNode.parentNode.querySelector(".l4 span").innerHTML);

                        num++;
                        this.parentNode.querySelector(".itext").value = num;
                        // this.parentNode.parentNode.querySelector(".l6 span").innerHtml = (itext*price)
                        this.parentNode.parentNode.querySelector(".l6 span").innerHTML = (num * price).toFixed(2);


                        paymentB();
                        paymentC();
                    }


                })

                //04 减法功能
                var mins = document.querySelectorAll(".middleShopCar .shopCarItem ul .l5 .mins ");
                mins.forEach(function (item) {
                    item.onclick = function () {
                        var num = parseInt(this.parentNode.querySelector(".itext").value);

                        var price = parseFloat(this.parentNode.parentNode.querySelector(".l4 span").innerHTML);

                        num--;
                        if (num <= 0) {
                            num = 1;
                        }
                        this.parentNode.querySelector(".itext").value = num;
                        // this.parentNode.parentNode.querySelector(".l6 span").innerHtml = (itext*price)
                        this.parentNode.parentNode.querySelector(".l6 span").innerHTML = (num * price).toFixed(2);

                        paymentB();
                        paymentC();
                    }
                })

                //05 删除功能
                var delet = document.querySelectorAll(".middleShopCar .shopCarItem ul .l7 .sure");
                delet.forEach(function (item) {
                    item.onclick = function () {
                        var flag = item.parentNode.parentNode.querySelector(".l1 input").checked;
                        if (flag) {
                            if (confirm("是否确定删除？")) {
                                item.parentNode.parentNode.parentNode.removeChild(item.parentNode.parentNode);

                                var chooseBox = document.querySelectorAll(".middleShopCar .shopCarItem ul .l1 input");
                                var doubleCh = chooseBox.length;
                                if (doubleCh === 0) {
                                    var carcheck = document.querySelector(".middleShopCar .func .selectBar input");
                                    carcheck.checked = false;
                                }
                            }
                        }
                        paymentB();
                        paymentC();
                    }
                })

                //06 点击全部删除
                var choiceDelete = document.querySelector('.middleShopCar .func .dele .choDel')
                choiceDelete.onclick = function () {
                    var chooseBox = document.querySelectorAll(".middleShopCar .shopCarItem ul .l1 input");
                    chooseBox.forEach(function (item) {
                        if (item.checked) {
                            item.parentNode.parentNode.parentNode.removeChild(item.parentNode.parentNode);

                            var chooseBox = document.querySelectorAll(".middleShopCar .shopCarItem ul .l1 input");
                            var doubleCh = chooseBox.length;
                            if (doubleCh === 0) {
                                var carcheck = document.querySelector(".middleShopCar .func .selectBar input");
                                carcheck.checked = false;
                            }


                        }
                    })
                    paymentB();
                    paymentC();
                }

                //07 合计价格
                paymentB();
                function paymentB() {
                    var chooseBoxCC = document.querySelectorAll(".middleShopCar .shopCarItem ul .l1 input:checked");
                    var price = 0;
                    chooseBoxCC.forEach(function (item) {
                        price += parseFloat(item.parentNode.parentNode.querySelector(".l6 span").innerHTML);
                    })
                    var totalMoney = document.querySelector(".middleShopCar .func .checkBill .bill .money")
                    totalMoney.innerHTML = "￥" + price;

                }

                //08 商品总数合计
                paymentC();
                function paymentC() {
                    var chooseBoxCC = document.querySelectorAll(".middleShopCar .shopCarItem ul .l1 input:checked");
                    var num = 0;
                    chooseBoxCC.forEach(function (item) {
                        num += parseFloat(item.parentNode.parentNode.querySelector(".l5 .itext").value);
                    })
                    var totalnumber = document.querySelector(".middleShopCar .func .checkBill .choice span")
                    totalnumber.innerHTML = num;

                }

            }


        })
    </script>

</body>


</html>